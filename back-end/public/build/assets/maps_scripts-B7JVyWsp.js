import{f as l}from"./search_city_image-D3F_YGFw.js";document.getElementById("search_city").addEventListener("input",function(){const e=document.getElementById("search_city").value;if(e.length<3){document.getElementById("results").classList.remove("border"),document.getElementById("results").classList.remove("mt-2"),document.getElementById("results").innerHTML="";return}const s=`https://api.tomtom.com/search/2/search/${e}.json?key=JaJJHJ6GGLUhADXt9Iuu4C5oaRT5Ah96&typeahead=true&limit=5&entityTypeSet=Municipality`;fetch(s).then(t=>t.json()).then(t=>{document.getElementById("results").classList.remove("border","mt-2"),document.getElementById("results").innerHTML="",t.results&&(document.getElementById("results").classList.add("border","mt-2"),t.results.forEach(n=>{const o=document.createElement("div");o.classList.add("result-item"),o.innerHTML+=`${n.address.freeformAddress} ,${n.address.country}`,o.addEventListener("click",()=>a(n)),document.getElementById("results").appendChild(o)}))}).catch(t=>{console.error("Errore nella richiesta:",t)})});function a(e){let s,t,n;l(e.address.freeformAddress),document.getElementById("search_city").value=e.address.freeformAddress,document.getElementById("ModalSearchedCity").innerHTML=e.address.freeformAddress,document.getElementById("results").innerHTML="",document.getElementById("results").classList.remove("mt-2"),document.getElementById("map").parentElement.parentElement.classList.remove("d-none"),s?(s.setCenter([e.position.lon,e.position.lat]),t.setCenter([e.position.lon,e.position.lat])):(s=tt.map({key:"JaJJHJ6GGLUhADXt9Iuu4C5oaRT5Ah96",container:"map",center:[e.position.lon,e.position.lat],zoom:13}),t=tt.map({key:"JaJJHJ6GGLUhADXt9Iuu4C5oaRT5Ah96",container:"map_modal",center:[e.position.lon,e.position.lat],zoom:10}),document.getElementById("map").classList.add("drop-in-image")),$("#exampleModal").on("shown.bs.modal",function(){document.getElementById("nav_bar").style.display="none",t&&t.resize()}),n&&n.remove(),n=new tt.Marker().setLngLat([e.position.lon,e.position.lat]).addTo(s,t),new tt.Marker().setLngLat([e.position.lon,e.position.lat]).addTo(t),n.getElement().addEventListener("click",()=>{const o=e.position.lon,r=e.position.lat;console.log(o);const d=`https://www.google.com/maps?q=${r},${o}`;window.open(d,"_blank")})}
